<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gabo 3D Viewer</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Three.js via Import Map (CDN) -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.162.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>

  <!-- â”€â”€â”€ 3D Canvas â”€â”€â”€ -->
  <canvas id="viewer-canvas"></canvas>

  <!-- â”€â”€â”€ Side Panel â”€â”€â”€ -->
  <div id="side-panel">

    <!-- Header -->
    <div class="panel-header">
      <img src="assets/logo.png" alt="Gabo 3D Viewer" class="panel-logo" />
      <p>Arrastra archivos .glb / .exr o usa los botones</p>
    </div>

    <!-- Load Section -->
    <div class="panel-section">
      <h2>Archivos</h2>
      <button class="btn" id="btn-load-model">
        <span class="icon">ğŸ“¦</span> Cargar Modelo GLB
      </button>
      <h2 style="margin-top:12px;">Ambiente Luminoso</h2>
      <select id="env-select" class="env-select">
        <option value="evening" selected>ğŸŒ‡ Camino al Atardecer</option>
        <option value="studio">ğŸ¢ Estudio Profesional</option>
        <option value="sunset">ğŸŒ… Atardecer Industrial</option>
        <option value="sky">â˜ï¸ Cielo Despejado</option>
        <option value="night">ğŸŒŒ Noche Estrellada</option>
        <option value="city">ğŸŒƒ Ciudad Futurista</option>
        <option value="custom">ğŸ“‚ Cargar EXR personalizado...</option>
      </select>
      <input type="file" id="glb-input" class="file-input-hidden" accept=".glb,.gltf" />
      <input type="file" id="hdri-input" class="file-input-hidden" accept=".exr" />
    </div>

    <!-- Transform Section -->
    <div class="panel-section">
      <h2>Transformar</h2>
      <div class="btn-group">
        <button class="btn btn-transform active" data-mode="translate">
          âœ¥ Mover
        </button>
        <button class="btn btn-transform" data-mode="rotate">
          â†» Rotar
        </button>
        <button class="btn btn-transform" data-mode="scale">
          â¤¡ Escalar
        </button>
      </div>
    </div>

    <!-- Camera Section -->
    <div class="panel-section">
      <h2>CÃ¡mara</h2>
      <button class="btn" id="btn-reset-camera">
        <span class="icon">ğŸ¯</span> Resetear CÃ¡mara
      </button>
      <button class="btn" id="btn-reset-model">
        <span class="icon">ğŸ”„</span> Resetear Modelo
      </button>
    </div>

    <!-- Display Section -->
    <div class="panel-section">
      <h2>VisualizaciÃ³n</h2>

      <div class="toggle-row">
        <label>Grid</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-grid" checked />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label>Ejes</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-axes" checked />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label>HDRI como fondo</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-hdri-bg" />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label>Auto-RotaciÃ³n</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-auto-rotate" checked />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label>Holograma</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-hologram" />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <label>Wireframe</label>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-wireframe" />
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Exposure Section -->
    <div class="panel-section">
      <h2>ExposiciÃ³n</h2>
      <div style="display:flex; align-items:center; gap:10px;">
        <input type="range" id="slider-exposure" min="0.1" max="3" step="0.05" value="1"
               style="flex:1; accent-color: #e94560;" />
        <span id="exposure-value" style="font-size:12px; min-width:36px; text-align:right;">1.00</span>
      </div>
    </div>

    <!-- Shortcuts -->
    <div class="panel-section" style="border-bottom:none;">
      <h2>Atajos de Teclado</h2>
      <div style="font-size:11px; color:#a0a0b0; line-height:1.8;">
        <b>G</b> â€” Mover &nbsp;|&nbsp; <b>R</b> â€” Rotar &nbsp;|&nbsp; <b>S</b> â€” Escalar<br/>
        <b>F</b> â€” Enfocar modelo<br/>
        <b>Esc</b> â€” Deseleccionar
      </div>
    </div>

  </div>

  <!-- â”€â”€â”€ Panel Toggle Button â”€â”€â”€ -->
  <button id="panel-toggle">â—€</button>

  <!-- â”€â”€â”€ Loading Overlay â”€â”€â”€ -->
  <div id="loading-overlay">
    <div class="spinner"></div>
    <p>Cargando...</p>
  </div>

  <!-- â”€â”€â”€ Drag & Drop Overlay â”€â”€â”€ -->
  <div id="drop-zone-overlay">
    <p>Suelta el archivo aquÃ­ (.glb / .exr)</p>
  </div>

  <!-- â”€â”€â”€ Info Bar â”€â”€â”€ -->
  <div id="info-bar">
    Renderer: WebGL | Tone Mapping: ACES Filmic
  </div>

  <!-- â”€â”€â”€ App Script â”€â”€â”€ -->
  <script type="module" src="app.js"></script>

</body>
</html>
